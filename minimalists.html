<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="color-scheme" content="dark light" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Codebase breakdown of Minimalists RTS by Oliver Neal, covering architecture, data model, key Unity C# APIs and AI-driven gameplay, highlighting engineering skills." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://oliverneal.dev/oliver.webp" />
    <meta property="og:title" content="Minimalists – Codebase Breakdown" />
    <meta property="og:description" content="A cohesive, portfolio-styled breakdown of the Minimalists RTS codebase: architecture, data model, key APIs, representative snippets, and technical notes." />
    <meta property="og:url" content="https://oliverneal.dev/minimalists.html" />
    <title>Minimalists – Codebase Breakdown</title>
    <link rel="icon" href="oliver.webp" type="image/webp">

    <!-- Fonts & Prism (match portfolio) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Keep default Prism, we'll override it below -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" />
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="nav-container">
            <div class="logo-and-icons">
                <div class="nav-logo">Oliver Neal</div>
                <div class="nav-icons">
                    <a href="https://github.com/OliverNealDev" target="_blank" rel="noopener noreferrer" title="GitHub">
                        <img src="github-icon.webp" alt="GitHub" onerror="this.style.display='none'" loading="lazy" />
                    </a>
                    <a href="https://embitgames.itch.io" target="_blank" rel="noopener noreferrer" title="Itch.io">
                        <img src="itch-icon.webp" alt="Itch.io" onerror="this.style.display='none'" loading="lazy" />
                    </a>
                    <a href="https://www.linkedin.com/in/oliver-neal-197b74290/" target="_blank" rel="noopener noreferrer" title="LinkedIn">
                        <img src="linkedin-icon.webp" alt="LinkedIn" onerror="this.style.display='none'" loading="lazy" />
                    </a>
                </div>
            </div>
            <nav>
                <ul>
                    <!-- (optional portfolio anchors) -->
                </ul>
            </nav>
            <div class="theme-toggle">
                <input type="checkbox" class="theme-checkbox" id="themeToggle" title="Toggle Theme">
            </div>
        </div>
    </header>

    <main>
        <!-- HERO -->
        <section class="page-hero reveal">
            <div class="breadcrumb">
                <span>←</span>
                <a href="index.html#solo-projects" title="Back to Portfolio">Back to Portfolio</a>
            </div>
            <div class="page-title">
                <h1>Minimalists – AI &amp; Node Control</h1>
                <p class="page-sub">Codebase Breakdown • Unity • ScriptableObjects • FSM AI</p>
            </div>
            <div class="doc-actions">
                <a href="https://embitgames.itch.io/minimalists" target="_blank" rel="noopener noreferrer" title="Play in browser" class="itchio">
                    <img src="itch-icon.webp" alt="Itch icon" onerror="this.style.display='none'" loading="lazy" /> Play in browser
                </a>
                <a href="https://github.com/OliverNealDev/Minimalists" target="_blank" rel="noopener noreferrer" title="View GitHub" class="github">
                    <img src="github-icon.webp" alt="GitHub icon" onerror="this.style.display='none'" loading="lazy" /> View on GitHub
                </a>
            </div>
        </section>

        <!-- Local TOC -->
        <nav class="doc-toc reveal" aria-label="On this page">
            <a href="#overview">Overview</a>
            <a href="#architecture">Architecture</a>
            <a href="#data-model">Data Model</a>
            <a href="#apis">Key APIs</a>
            <a href="#snippets">Code Snippets</a>
            <a href="#performance">Performance</a>
            <a href="#testing">Testing</a>
            <a href="#tradeoffs">Trade-offs</a>
        </nav>

        <div class="doc-grid">
            <!-- OVERVIEW -->
            <section id="overview" class="doc-card reveal">
                <h2>Overview</h2>
                <p>
                    A minimalist real-time strategy prototype where houses, turrets and helipads collaborate through dynamic node control and streamlined AI.
                    Built with Unity and data-driven <strong>ScriptableObjects</strong> to stay highly moddable and fast.
                </p>
            </section>

            <!-- ARCHITECTURE -->
            <section id="architecture" class="doc-card reveal">
                <h2>Architecture</h2>
                <p>Core systems are divided between client input, game loop, and combat/economy services.</p>
                <figure class="doc-figure">
                    <img src="docs/diagrams/minimalists-architecture.svg" alt="Architecture diagram" loading="lazy" />
                    <figcaption>High-level architecture</figcaption>
                </figure>

                <h3>Unit Command Sequence</h3>
                <figure class="doc-figure">
                    <img src="docs/diagrams/minimalists-sequence.svg" alt="Unit command sequence diagram" loading="lazy" />
                    <figcaption>Sequence from input → validation → spawn/stream → resolve</figcaption>
                </figure>
            </section>

            <!-- DATA MODEL -->
            <section id="data-model" class="doc-card reveal">
                <h2>Data Model</h2>
                <p>The game leans on data-driven ScriptableObjects so designers can tune balance without touching code.</p>
                <div class="doc-table-wrapper">
                    <table>
                        <thead>
                            <tr><th>Field</th><th>Type</th><th>Description</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>constructName</td><td>string</td><td>Display name of the structure</td></tr>
                            <tr><td>upgradeCost</td><td>int</td><td>Units required to upgrade</td></tr>
                            <tr><td>maxUnitCapacity</td><td>int</td><td>Population provided by this construct</td></tr>
                            <tr><td>unitsPerSecond</td><td>float</td><td>Passive unit generation rate</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- APIs / CONTRACTS -->
            <section id="apis" class="doc-card reveal">
                <h2>Key APIs / Contracts</h2>

                <h3>Game Manager</h3>
                <pre><code class="language-csharp">public class GameManager : MonoBehaviour
{
    public void registerUnit(UnitController unit);
    public void unregisterUnit(UnitController unit);
}</code></pre>

                <h3>Construct Controller</h3>
                <pre><code class="language-csharp">public class ConstructController : MonoBehaviour
{
    public void SendUnits(ConstructController target, float percentage);
}</code></pre>
            </section>

            <!-- REPRESENTATIVE SNIPPETS -->
            <section id="snippets" class="doc-card reveal">
                <h2>Representative Code Snippets</h2>

                <p><strong>Map analysis assigns roles to each node</strong> – uses distance percentages to classify frontline, support and economic nodes.</p>
                <details>
                    <summary>Show code</summary>
<pre><code class="language-csharp">@AIManager7.cs lines 66-103
private void AnalyzeMapAndAssignRoles(List&lt;ConstructController&gt; myNodes)
{
    nodeRoles.Clear();
    var enemyNodes = GameManager.Instance.allConstructs
        .Where(c =&gt; c.Owner != aiFaction &amp;&amp; c.Owner != GameManager.Instance.unclaimedFaction)
        .ToList();

    // If no enemies exist or we have too few nodes for complex roles, they are all economic.
    if (!enemyNodes.Any() || myNodes.Count &lt;= 2)
    {
        myNodes.ForEach(n =&gt; nodeRoles[n] = NodeRole.Economic);
        return;
    }

    Vector3 enemyCenter = GetFactionCenter(enemyNodes);

    // Sort nodes by their distance to the enemy's center of mass.
    var sortedNodes = myNodes.OrderBy(n =&gt; Vector3.Distance(n.transform.position, enemyCenter)).ToList();

    int nodeCount = sortedNodes.Count;
    // Designate roles by percentage: closest 30% are Frontline, next 40% are Support, rest are Economic.
    int frontlineCount = Mathf.Max(1, Mathf.CeilToInt(nodeCount * 0.3f));
    int supportCount = Mathf.CeilToInt(nodeCount * 0.4f);

    for (int i = 0; i &lt; nodeCount; i++)
    {
        ConstructController currentNode = sortedNodes[i];
        if (i &lt; frontlineCount)
        {
            nodeRoles[currentNode] = NodeRole.Frontline;
        }
        else if (i &lt; frontlineCount + supportCount)
        {
            nodeRoles[currentNode] = NodeRole.Support;
        }
        else
        {
            nodeRoles[currentNode] = NodeRole.Economic;
        }
    }
}</code></pre>
                </details>
                <p><a href="https://github.com/OliverNealDev/Minimalists/blob/main/Assets/Scripts/AIManager7.cs#L66-L103" target="_blank" rel="noopener noreferrer">View on GitHub (lines 66–103)</a></p>

                <p><strong>Streaming units between nodes</strong> – validates targets and spawns units along the current movement system.</p>
                <details>
                    <summary>Show code</summary>
<pre><code class="language-csharp">@ConstructController.cs lines 415-450
public void SendUnits(ConstructController target, float percentage)
{
    bool isValidTarget = true;
    foreach (ConstructController construct in targetConstructs)
    {
        if (construct == target)
        {
            isValidTarget = false;
            break;
        }
    }

    if (!isValidTarget) return;

    int unitsToSend = Mathf.FloorToInt(UnitCount * percentage);
    if (unitsToSend == 0 &amp;&amp; UnitCount &gt; 0)
    {
        unitsToSend = 1;
    }
    if (unitsToSend &gt; 0)
    {
        if (currentConstructData is HelipadData)
        {
            targetConstructs.Add(target);
            StartCoroutine(SpawnUnitsRoutine(unitsToSend, target));
        }
        else
        {
            if (navmeshIndex == target.navmeshIndex)
            {
                targetConstructs.Add(target);
                StartCoroutine(SpawnUnitsRoutine(unitsToSend, target));
            }
        }
    }
}</code></pre>
                </details>
                <p><a href="https://github.com/OliverNealDev/Minimalists/blob/main/Assets/Scripts/ConstructController.cs#L415-L450" target="_blank" rel="noopener noreferrer">View on GitHub (lines 415–450)</a></p>
            </section>

            <!-- PERFORMANCE -->
            <section id="performance" class="doc-card reveal">
                <h2>Performance Notes</h2>
                <p>Profiling is ongoing and formal benchmarks are not yet published.</p>
            </section>

            <!-- TESTING -->
            <section id="testing" class="doc-card reveal">
                <h2>Testing &amp; Validation</h2>
                <p>Currently verified through manual playtesting; no automated tests are in place.</p>
            </section>

            <!-- TRADEOFFS -->
            <section id="tradeoffs" class="doc-card reveal">
                <h2>Trade-offs &amp; Next Steps</h2>
                <ul style="margin-left:1.25rem;">
                    <li>Finite state AI is easy to reason about; behavior trees could scale variety later.</li>
                    <li>Current movement/streaming approach is lightweight but has limited dynamic-obstacle handling, only works reliably for static obstacles.</li>
                    <li>Data-driven design simplifies scalability but can potentially be detrimental for systems that dont necessarily need it.</li>
                </ul>
            </section>
        </div>
    </main>

    <footer>
        &copy; 2025 Oliver Neal. All rights reserved.
    </footer>

    <!-- Prism -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-csharp.min.js" defer></script>

    <script src="main.js" defer></script>
</body>
</html>
