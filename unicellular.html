<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="color-scheme" content="dark light" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Technical breakdown of Unicellular ECS project by Oliver Neal, explaining architecture, entity systems and performance-focused Unity C# techniques for emergent gameplay." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://example.com/unicellular.png" />
    <meta property="og:title" content="Unicellular – Codebase Breakdown" />
    <meta property="og:description" content="A cohesive, portfolio-styled breakdown of the Unicellular ECS codebase: architecture, data model, key APIs, representative snippets, and technical notes." />
    <meta property="og:url" content="https://example.com/unicellular.html" />
    <title>Unicellular – Codebase Breakdown</title>
    <link rel="icon" href="oliver.webp" type="image/webp">

    <!-- Fonts & Prism (match portfolio) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Keep default Prism, we'll override it below -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" />
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="nav-container">
            <div class="logo-and-icons">
                <div class="nav-logo">Oliver Neal</div>
                <div class="nav-icons">
                    <a href="https://github.com/OliverNealDev" target="_blank" rel="noopener noreferrer" title="GitHub">
                        <img src="github-icon.webp" alt="GitHub" onerror="this.style.display='none'" loading="lazy" />
                    </a>
                    <a href="https://embitgames.itch.io" target="_blank" rel="noopener noreferrer" title="Itch.io">
                        <img src="itch-icon.webp" alt="Itch.io" onerror="this.style.display='none'" loading="lazy" />
                    </a>
                    <a href="https://www.linkedin.com/in/oliver-neal-197b74290/" target="_blank" rel="noopener noreferrer" title="LinkedIn">
                        <img src="linkedin-icon.webp" alt="LinkedIn" onerror="this.style.display='none'" loading="lazy" />
                    </a>
                </div>
            </div>
            <nav>
                <ul>
                </ul>
            </nav>
            <div class="theme-toggle">
                <input type="checkbox" class="theme-checkbox" id="themeToggle" title="Toggle Theme">
            </div>
        </div>
    </header>

    <main>
        <section class="page-hero reveal">
            <div class="breadcrumb">
                <span>←</span>
                <a href="index.html#solo-projects" title="Back to Portfolio">Back to Portfolio</a>
            </div>
            <div class="page-title">
                <h1>Unicellular – Manager-Driven ECS</h1>
                <p class="page-sub">Codebase Breakdown • Unity • Custom ECS • Simulation</p>
            </div>
            <div class="doc-actions">
                <a href="https://github.com/OliverNealDev/UnicellularRebuiltECS" target="_blank" rel="noopener noreferrer" title="View GitHub" class="github">
                    <img src="github-icon.webp" alt="GitHub icon" onerror="this.style.display='none'" loading="lazy" /> View on GitHub
                </a>
            </div>
        </section>

        <nav class="doc-toc reveal" aria-label="On this page">
            <a href="#overview">Overview</a>
            <a href="#architecture">Architecture</a>
            <a href="#data-model">Data Model</a>
            <a href="#apis">Key APIs</a>
            <a href="#snippets">Code Snippets</a>
            <a href="#performance">Performance</a>
            <a href="#testing">Testing</a>
            <a href="#tradeoffs">Trade-offs</a>
        </nav>

        <div class="doc-grid">
            <section id="overview" class="doc-card reveal">
                <h2>Overview</h2>
                <p>
                    A 2D life simulation where colourful unicells roam, fight, and evolve. The project uses a manager-driven ECS-style architecture in Unity to keep systems modular and scalable.
                </p>
            </section>

            <section id="architecture" class="doc-card reveal">
                <h2>Architecture</h2>
                <p>Gameplay is coordinated by specialised managers handling entities, economy, camera and UI.</p>
            </section>

            <section id="data-model" class="doc-card reveal">
                <h2>Data Model</h2>
                <p>Persistent statistics for each unicell are stored in a simple serialisable class.</p>
                <div class="doc-table-wrapper">
                    <table>
                        <thead>
                            <tr><th>Field</th><th>Type</th><th>Description</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>Species</td><td>string</td><td>Identifier for the unicell species</td></tr>
                            <tr><td>Damage</td><td>float</td><td>Base attack damage</td></tr>
                            <tr><td>MaxHealth</td><td>float</td><td>Maximum health value</td></tr>
                            <tr><td>Level</td><td>int</td><td>Current evolution level</td></tr>
                            <tr><td>XP</td><td>float</td><td>Accumulated experience points</td></tr>
                            <tr><td>XP_Threshold</td><td>int</td><td>XP required for next level</td></tr>
                            <tr><td>BaseScale</td><td>Vector2</td><td>Default sprite scale</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="apis" class="doc-card reveal">
                <h2>Key APIs / Contracts</h2>
                <h3>Entity Manager</h3>
                <pre><code class="language-csharp">public void SpawnUnicells(UnicellSpecies species, int amount);</code></pre>
                <h3>Economy Manager</h3>
                <pre><code class="language-csharp">public void IncrementUnicellPopulation(string unicellType);</code></pre>
            </section>

            <section id="snippets" class="doc-card reveal">
                <h2>Representative Code Snippets</h2>

                <p><strong>Spawning species-specific cells</strong> – loops through count and initialises each with the correct prefab.</p>
                <details>
                    <summary>Show code</summary>
<pre><code class="language-csharp">@EntityManager.cs lines 1422-1468
public void SpawnUnicells(UnicellSpecies species, int Amount)
{
    for (int x = 0; x &lt; Amount; x++)
    {
        switch (species)
        {
            case UnicellSpecies.Blue:
                initialUnicell = Instantiate(blueUnicellPrefab).GetComponent&lt;Unicell&gt;();
                initialUnicell.transform.parent = BlueUnicellsGameObject.transform;
                Initialise(initialUnicell, Unicell.UnicellSpecies.Blue);
                break;
            case UnicellSpecies.Pink:
                initialUnicell = Instantiate(pinkUnicellPrefab).GetComponent&lt;Unicell&gt;();
                initialUnicell.transform.parent = PinkUnicellsGameObject.transform;
                Initialise(initialUnicell, Unicell.UnicellSpecies.Pink);
                break;
            case UnicellSpecies.Yellow:
                initialUnicell = Instantiate(yellowUnicellPrefab).GetComponent&lt;Unicell&gt;();
                initialUnicell.transform.parent = YellowUnicellsGameObject.transform;
                Initialise(initialUnicell, Unicell.UnicellSpecies.Yellow);
                break;
            case UnicellSpecies.Green:
                initialUnicell = Instantiate(greenUnicellPrefab).GetComponent&lt;Unicell&gt;();
                initialUnicell.transform.parent = GreenUnicellsGameObject.transform;
                Initialise(initialUnicell, Unicell.UnicellSpecies.Green);
                break;
            case UnicellSpecies.Purple:
                initialUnicell = Instantiate(purpleUnicellPrefab).GetComponent&lt;Unicell&gt;();
                initialUnicell.transform.parent = PurpleUnicellsGameObject.transform;
                Initialise(initialUnicell, Unicell.UnicellSpecies.Purple);
                break;
            case UnicellSpecies.Red:
                initialUnicell = Instantiate(redUnicellPrefab).GetComponent&lt;Unicell&gt;();
                initialUnicell.transform.parent = RedUnicellsGameObject.transform;
                Initialise(initialUnicell, Unicell.UnicellSpecies.Red);
                break;
            case UnicellSpecies.Orange:
                initialUnicell = Instantiate(orangeUnicellPrefab).GetComponent&lt;Unicell&gt;();
                initialUnicell.transform.parent = OrangeUnicellsGameObject.transform;
                Initialise(initialUnicell, Unicell.UnicellSpecies.Orange);
                break;
        }
        initialUnicell.transform.position = new Vector2((Random.value * Amount * 10) - (Amount / 2f), (Random.value * Amount * 10) - (Amount / 2f));
        initialUnicell.CurrentState = UnicellState.Idle;
        RegisterUnicell(initialUnicell);
    }
}</code></pre>
                </details>
                <p><a href="https://github.com/OliverNealDev/UnicellularRebuiltECS/blob/main/Assets/Scripts/Managers/UnicellManager/EntityManager.cs#L1422-L1468" target="_blank" rel="noopener noreferrer">View on GitHub (lines 1422–1468)</a></p>

                <p><strong>Adjusting target populations</strong> – ensures economy goals drive spawning needs.</p>
                <details>
                    <summary>Show code</summary>
<pre><code class="language-csharp">@EconomyManager.cs lines 901-930
public void IncrementUnicellPopulation(string UnicellType)
{
    switch (UnicellType)
    {
        case "Blue":
            TargetBlueUnicellPopulation++;
            break;
        case "Pink":
            TargetPinkUnicellPopulation++;
            break;
        case "Yellow":
            TargetYellowUnicellPopulation++;
            break;
        case "Green":
            TargetGreenUnicellPopulation++;
            break;
        case "Purple":
            TargetPurpleUnicellPopulation++;
            break;
        case "Red":
            TargetRedUnicellPopulation++;
            break;
        case "Orange":
            TargetOrangeUnicellPopulation++;
            break;
        default:
            Debug.LogError("EconomyManager IncrementUnicellPopulation() - Unknown UnicellType for target population incrementation");
            break;
    }
}</code></pre>
                </details>
                <p><a href="https://github.com/OliverNealDev/UnicellularRebuiltECS/blob/main/Assets/Scripts/Managers/EconomyManager.cs#L901-L930" target="_blank" rel="noopener noreferrer">View on GitHub (lines 901–930)</a></p>
            </section>

            <section id="performance" class="doc-card reveal">
                <h2>Performance Notes</h2>
                <p>Initial profiling focuses on entity spawning and per-frame manager updates; further optimisation is ongoing.</p>
                <p>All profiling was recorded in-editor on a Ryzen&nbsp;7&nbsp;7800X3D. Demo clips on the main portfolio page show:</p>
                <ul style="margin-left:1.25rem;">
                    <li>1000&nbsp;Unicells sustaining 144+&nbsp;fps.</li>
                    <li>6000&nbsp;Unicells maintaining roughly 100&nbsp;fps.</li>
                </ul>
                <figure class="doc-figure">
                    <video controls muted playsinline loop poster="Project Media/Unicellular/1000EntitiesPoster.webp">
                        <source src="Project Media/Unicellular/1000Entities.webm" type="video/webm"> Your browser does not support the video tag.
                    </video>
                    <figcaption>1000 Unicells @ 144+ fps</figcaption>
                </figure>
                <figure class="doc-figure">
                    <video controls muted playsinline loop poster="Project Media/Unicellular/10kEntitiesPoster.webp">
                        <source src="Project Media/Unicellular/10KEntities.webm" type="video/webm"> Your browser does not support the video tag.
                    </video>
                    <figcaption>6000 Unicells @ ~100 fps</figcaption>
                </figure>
            </section>

            <section id="testing" class="doc-card reveal">
                <h2>Testing &amp; Validation</h2>
                <p>Functionality is verified through manual playtesting; automated unit tests are not yet available.</p>
                <p>Manual playtests were carried out with multiple people. One tester discovered a bug where 64-bit <code>long</code> values were truncated to 32-bit <code>int</code>s; explicit conversions have been added to prevent this from recurring. Automated unit tests are not yet available.</p>
            </section>
        </div>
    </main>

    <footer>
        &copy; 2025 Oliver Neal. All rights reserved.
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-csharp.min.js" defer></script>

    <script src="main.js" defer></script>
</body>
</html>